<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Color Code </title>
        <link href ="TestCSS.css" rel="stylesheet"/>
    </head>
    <body>
        <h1 id = "Title"> Color Code </h1>
        <button id="button" onClick="disappear()">Start</button>
        <p id ="countdown"> </p>
        <script>
            var countNum;
            var coloredSquares = ["http://piq.codeus.net/static/media/userpics/piq_307148.png",
                                  "http://piq.codeus.net/static/media/userpics/piq_307149.png", 
                                  "http://piq.codeus.net/static/media/userpics/piq_307153.png",
                                  "http://piq.codeus.net/static/media/userpics/piq_307156.png",
                                  "http://piq.codeus.net/static/media/userpics/piq_307157.png",
                                  "http://piq.codeus.net/static/media/userpics/piq_307151.png"];
            var colors = ["#fe0000", "#ff7701", "#007fff", "#7f00ff", "#ff00fe", "#55ff00" ];
            var threeWords = ["CAT", "DOG", "MUG", "BOY", "BYE", "BOY",
                              "TRY", "PUG", "DAY", "HOP", "RED", "FOG", "DUG", "ZAP", "FOX", "BOX", "FAX"];
            var currentSquare = [];
            var currentColor = [];
            var emptySquares = [];
            var letters = [];
            var randomSquares = [];
            var randomColors = [];
            var scoreP;
            var scoreDiv;
            var scoreText = document.createTextNode("Score: 0");
            var score = 0;
            window.onload=function(){
                var countdown = document.getElementById("countdown");
                countdown.style.display="none";
                countNum = 4;
            };
            
            function disappear(){
                var title = document.getElementById("Title");
                var onClick = document.getElementById("button");
                title.style.display="none";
                onClick.style.display="none";
                countDown();
            }
   
            function countDown(){
                if(countNum === 1)
                    startGame();
                else{
                    var countdown = document.getElementById("countdown");
                    countdown.style.display="block";
                    countNum--;
                    countdown.innerHTML = countNum;
                    setTimeout(countDown, 1000);
                }
            }
            
            function startGame(){
                var countdown = document.getElementById("countdown");
                countdown.style.display="none";
                var imgDiv = document.createElement("div");
                imgDiv.style.height = "200px";
                imgDiv.style.lineHeight = "200px";
                imgDiv.style.transform = "translateY(+120%)";
                imgDiv.style.textAlign = "center";
                imgDiv.style.zIndex = "1";
                document.body.appendChild(imgDiv);
                for(var i = 0; i < 3; i++){
                    var emptySquare = document.createElement("img");
                    var index = Math.floor((Math.random()*6)+0);
                    var colorLink = coloredSquares[index];
                    containsValue(colorLink);
                    emptySquare.src = "http://piq.codeus.net/static/media/userpics/piq_307159.png";
                    emptySquare.style.verticalAlign = "middle";
                    emptySquare.style.paddingLeft = "20px";
                    emptySquare.style.paddingRight = "20px";
                    emptySquares.push(emptySquare);
                    imgDiv.appendChild(emptySquare);
                }
                var letterDiv = document.createElement("div");
                letterDiv.style.position = "relative";
                letterDiv.style.height = "200px";
                letterDiv.style.lineHeight = "200px";
                letterDiv.style.transform = "translateY(+16%)";
                letterDiv.style.textAlign = "center";
                var string = threeWords[Math.floor((Math.random()*16)+0)];
                for(var i = 0; i < 3; i++){
                    var letter = document.createElement("p");
                    var c = document.createTextNode(string.charAt(i));
                    letter.style.verticalAlign = "middle";
                    letter.style.display = "inline-block";
                    letter.style.paddingLeft = "48px";
                    letter.style.paddingRight = "48px";
                    letter.style.color = currentColor[i];
                    letter.style.font = "68px cambria";
                    letter.appendChild(c);
                    letters.push(letter);
                    letterDiv.appendChild(letter);
                }
                letterDiv.style.zIndex = "2";
                document.body.appendChild(letterDiv);
                scoreDiv = document.createElement("div");
                scoreDiv.style.position = "relative";
                scoreDiv.style.height = "200px";
                scoreDiv.style.lineHeight = "200px";
                scoreDiv.style.transform = "translateY(-215%)";
                scoreDiv.style.textAlign = "center";
                scoreDiv.style.zIndex = "3";
                scoreP = document.createElement("p");
                scoreP.appendChild(scoreText);
                scoreP.style.font = "80px arial";
                scoreP.style.textAlign = "center";
                scoreP.style.verticalAlign = "middle";
                scoreDiv.appendChild(scoreP);
                document.body.appendChild(scoreDiv);
                setTimeout(userGuess, 3500);
            }
            
            function containsValue(value){
                if(currentSquare.indexOf(value) === -1){
                    currentSquare.push(value);
                    currentColor.push(colors[coloredSquares.indexOf(value)]);
                    return;
                }
                else{
                    var newValue = coloredSquares[Math.floor((Math.random()*6)+0)];
                    containsValue(newValue);
                    return;
                }
            }
            
            function userGuess(){
                for(var i = 0; i < 3; i++){
                    letters[i].innerHTML = "--";
                    letters[i].style.color = "black";
                    setRandomOrder(currentSquare[Math.floor((Math.random()*3)+0)]);
                    emptySquares[i].src = randomSquares[i];
                }
                 
            }
            
            function setRandomOrder(value){
                if(randomSquares.indexOf(value) === -1){
                    randomSquares.push(value);
                    randomColors.push(currentColor[currentSquare.indexOf(value)]);
                    return;
                }
                else{
                    var newValue = currentSquare[Math.floor((Math.random()*3)+0)];
                    setRandomOrder(newValue);
                    return;
                }
            }

        </script>
    </body>
</html>
